<section class="submit-bid-page">
  <div class="container-fluid">

    <!-- Tab Navigation -->
    <!-- <div class="po-tabs mb-3">
      <button (click)="selectTab('po-details')" [ngClass]="{ 'active': selectedTab === 'po-details' }" class="po-tab">
        PURCHASE ORDER
      </button>

      <button (click)="selectTab('shipment-details')" [ngClass]="{ 'active': selectedTab === 'shipment-details' }"
        class="po-tab">
        SHIPMENT DETAILS
      </button>

      <button (click)="selectTab('grn-details')" [ngClass]="{ 'active': selectedTab === 'grn-details' }" class="po-tab">
        GRN
      </button>

      <button (click)="selectTab('invoice-details')" [ngClass]="{ 'active': selectedTab === 'invoice-details' }"
        class="po-tab">
        INVOICING
      </button>
    </div> -->


    <div class="po-tabs mt-3">
      <nav>
        <button (click)="selectTab('po-details')" [ngClass]="{ 'tab-current': selectedTab === 'po-details' }"
          class="po-style-tab">
          <span>PURCHASE ORDER</span>
        </button>

        <button (click)="selectTab('shipment-details')"
          [ngClass]="{ 'tab-current': selectedTab === 'shipment-details' }" class="po-style-tab">
          <span>SHIPMENT DETAILS</span>
        </button>

        <button (click)="selectTab('grn-details')" [ngClass]="{ 'tab-current': selectedTab === 'grn-details' }"
          class="po-style-tab">
          <span>GRN</span>
        </button>

        <button (click)="selectTab('invoice-details')" [ngClass]="{ 'tab-current': selectedTab === 'invoice-details' }"
          class="po-style-tab">
          <span>INVOICING</span>
        </button>
      </nav>
    </div>


    <div *ngIf="selectedTab === 'po-details'">
      <!-- Action Bar -->
      <div class="card cstm-ui-card mb-3 py-2 px-3 d-flex justify-content-start flex-wrap">
        <div class="d-flex align-items-center">
          <button class="btn btn-lg position-relative me-2" type="button" (click)="goBack()">
            <i class="ft-arrow-left"></i>
          </button>
          <h5 class="mt-2 fw-bold">Purchase Order Details</h5>
        </div>
      </div>

      <!-- PO Info -->
      <div class="card shadow-sm mb-4">
        <div class="card-body" style="border: 0.5px solid #53bd53; padding: 1rem; border-radius: 8px;">

          <div class="row">
            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label small mb-1">PO No.</label>
              <input class="form-control form-control-sm" [value]="poDetails?.purchaseOrderNo" disabled>
            </div>

            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label small mb-1">Requisition No</label>
              <input class="form-control form-control-sm" [value]="poDetails?.requisitionNo || '-'" disabled>
            </div>

            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label small mb-1">RFQ No</label>
              <input class="form-control form-control-sm" [value]="poDetails?.rfqNo || '-'" disabled>
            </div>

            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label small mb-1">Status</label>
              <input class="form-control form-control-sm" [value]="poDetails?.requestStatus" disabled>
            </div>

            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label small mb-1">Date</label>
              <input class="form-control form-control-sm" [value]="poDetails?.createdDate | date:'yyyy-MM-dd'" disabled>
            </div>
          </div>
        </div>
      </div>

      <!-- Items Section -->
      <div class="d-flex justify-content-between align-items-center mb-2 cursor-pointer" (click)="toggleItems()">
        <h5 class="section-title m-0">Items</h5>
        <i class="ft-chevron-down transition-icon" [ngClass]="{ 'rotate-icon': itemsExpanded }"></i>
      </div>

      <div class="expand-wrapper" [ngClass]="{ 'expanded': itemsExpanded }">
        <div class="table-responsive">
          <table class="table custom-modern-table">
            <thead>
              <tr>
                <th>Item</th>
                <th>Description</th>
                <th class="text-center">Qty</th>
                <th class="text-end">Unit Price</th>
                <th class="text-end">Amount</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let item of poDetails?.items">
                <td><span class="item-title">{{ item.itemName }}</span></td>
                <td class="small" style="max-width: 250px;">{{ item.itemDescription }}</td>
                <td class="text-center">{{ item.quantity }}</td>
                <td class="text-end">{{ item.unitPrice | number:'1.2-2' }}</td>
                <td class="text-end fw-semibold">{{ item.amount | number:'1.2-2' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="text-end fw-bold mt-3">
        Total: {{ poDetails?.totalAmount | number:'1.2-2' }}
      </div>
    </div>

    <div *ngIf="selectedTab === 'shipment-details'">
      <app-shipment-details [poId]="poId"></app-shipment-details>
    </div>

    <div *ngIf="selectedTab === 'grn-details'">
      <app-grn-details></app-grn-details>
    </div>

    <div *ngIf="selectedTab === 'invoice-details'">
      <app-invoice></app-invoice>
    </div>

  </div>
</section>