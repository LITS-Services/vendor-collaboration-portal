<div class="card">
  <div class="card-body">
    <div class="w-100 mb-3">
      <h2 class="heading mb-0">Welcome Back!</h2>
      <p>Please enter your username and password</p>
    </div>

    <ngb-alert type="light-danger" class="my-2" *ngIf="isLoginFailed" (close)="isLoginFailed = false">
      <p class="mb-0">Login failed!</p>
    </ngb-alert>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="form-group mb-3">
        <input type="text" formControlName="username" class="form-control" placeholder="Enter Username"
          [ngClass]="{ 'is-invalid': loginFormSubmitted && lf.username.invalid, 'is-valid': loginFormSubmitted && !lf.username.invalid }"
          required>
        <div *ngIf="loginFormSubmitted && (lf.username.invalid || lf.username.errors?.required)"
          class="help-block mt-1 text-danger">
          <i class="ft-alert-circle align-middle"></i> This is required
        </div>
      </div>

      <div class="form-group mb-2">
        <div class="form-group mb-3">
          <div class="position-relative">
            <input [type]="hidePassword ? 'password' : 'text'" formControlName="password" class="form-control"
              placeholder="Enter password" [ngClass]="{
                    'is-invalid': loginFormSubmitted && lf.password.invalid,
                    'is-valid': loginFormSubmitted && lf.password.valid
                  }" required />
            <i [ngClass]="hidePassword ? 'ft ft-eye-off eye-icon' : 'ft ft-eye eye-icon'"
              (click)="hidePassword = !hidePassword" [title]="hidePassword ? 'Show Password' : 'Hide Password'">
            </i>
          </div>
          <div *ngIf="loginFormSubmitted && lf.password.invalid" class="invalid-feedback">
            <i class="ft-alert-circle me-1"></i> Password is required
          </div>
        </div>
        <div *ngIf="loginFormSubmitted && (lf.password.invalid || lf.password.errors?.required)"
          class="invalid-feedback"> Please enter the valid password
        </div>
      </div>

      <div class="row my-3">
        <div class="col-6">
          <div class="checkbox">
            <input type="checkbox" formControlName="rememberMe" class="form-control" id="rememberMe"
              (change)="rememberMe()">
            <label for="rememberMe"><span class="mb-3 font-weight-normal">Remember me</span></label>
          </div>
        </div>
        <div class="col-6 text-end">
          <a (click)="forgotpassword()" [routerLink]="['/pages/forgotpassword']" [ngClass]="'link'">Forgot password?</a>
        </div>
      </div>

      <div class="mb-2">
        <ng-hcaptcha formControlName="recaptcha"></ng-hcaptcha>

        <div *ngIf="loginFormSubmitted && loginForm.get('recaptcha')?.invalid" class="invalid-feedback">
          Please verify that you are not a robot.
        </div>
      </div>

      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary login-btn w-100">Login</button>
      </div>
    </form>

    <div class="or-divider">
      <span>OR</span>
    </div>

    <!-- Round SSO Buttons in Same Line -->
    <div class="sso-buttons-container">
      <!-- Microsoft SSO -->
      <a class="social-round-btn ms-round-btn sso-tooltip" 
         (click)="loginWithMicrosoft()"
         title="Login with Microsoft">
        <i class="cstm-icons ms-logo"></i>
      </a>

      <!-- Google SSO -->
      <a class="social-round-btn google-round-btn sso-tooltip" 
         (click)="loginWithGoogle()"
         title="Login with Google">
        <i class="cstm-icons google-logo"></i>
      </a>

      <!-- Facebook SSO -->
      <a class="social-round-btn facebook-round-btn sso-tooltip" 
         (click)="loginWithFacebook()"
         title="Login with Facebook">
        <i class="cstm-icons facebook-logo"></i>
      </a>
    </div>

    <div class="d-flex flex-sm-row justify-content-center mt-3">
      <a href="" [routerLink]="['/pages/registeration']">
        <h6 class="heading register-btn"><u>Register as a Vendor</u></h6>
      </a>
    </div>
  </div>
</div>